# PRD - URL 기반 QA 자동 생성/실행 (MVP v1)

## 1) 북극성 목표
사용자가 URL만 입력하면,
**서비스 구조 분석 → QA 시나리오 생성 → 핵심 사용자 흐름 자동 검증 → 리포트 제공**까지
원클릭으로 완료한다.

---

## 2) 사용자 시나리오 (Happy Path)
1. 사용자가 URL 입력
2. 시스템이 동일 origin 범위에서 사이트 구조 자동 분석
3. 분석 결과(사이트맵/플로우 후보)를 사용자에게 표시
4. 사용자가 플로우를 수정/추가/삭제 후 확정
5. 시스템이 확정 플로우를 자동 실행
6. PASS / PASS(with warnings) / FAIL 판정 및 리포트 제공

---

## 3) MVP 범위 (In Scope)

### 3.1 사이트 자동 분석 (Discovery)
- 동일 origin(같은 도메인)만 크롤링
- 최대 50페이지
- 최대 depth 3
- `href` 기반 링크만 추적
- JS 클릭 기반 동적 탐색은 v2로 보류
- 동일 경로 + query param은 1개만 수집

자동 추출 항목:
- 페이지 구조(사이트맵)
- 주요 메뉴 구조
- 인증 필요 여부 추정
- CTA / 폼 / 버튼 탐지
- 서비스 타입 1차 분류
  - 랜딩형 / 로그인형 / 대시보드형 / 혼합형

### 3.2 분석 결과 확인 (Human-in-the-loop)
- 자동 추출 사이트맵 표시
- 핵심 플로우 후보 제시
- 사용자가 수정/추가/삭제 가능
- 테스트 대상 플로우 확정

### 3.3 자동 실행 (Execution)
- 확정된 플로우를 단계별 실행
- 단계별 성공/실패 기준 체크
- 로그 기록
- 최종 리포트 출력

---

## 4) 인증 처리 정책 (v1)
- 기본: 비로그인 모드 실행
- 로그인 플로우: 선택적 포함
- credential은 실행 시 수동 입력
- 실행 중 메모리 주입(저장하지 않음)
- 세션 쿠키 자동 캡처
- 환경변수 저장/DB 저장 없음

---

## 5) 판정 규칙

### 5.1 Critical Fail
- HTTP 4xx / 5xx
- 네트워크 타임아웃
- JS uncaught error
- 필수 요소(selector) 미노출
- 목표 URL 도달 실패

### 5.2 Warning
- 콘솔 warning
- 로딩 5초 초과
- 일부 리소스 404
- 텍스트 일부 미노출

### 5.3 최종 상태
- PASS
- PASS (with warnings)
- FAIL

---

## 6) 리포트 요구사항
- 웹 대시보드 HTML
- CSV 다운로드
- 실패 케이스 스크린샷 자동 저장(필수)
- 콘솔 로그 첨부
- 네트워크 오류 요약 포함
- 재실행 버튼 UX는 v2

---

## 7) 비범위 (Out of Scope, v1)
- JS 클릭 기반 전체 동적 탐색
- 재실행 버튼 UX
- 고급 인증 자동화(OAuth/CAPTCHA 우회)
- 멀티브라우저/픽셀비교/고급 접근성 검증

---

## 8) 완료 정의 (Definition of Done)
아래를 모두 만족하면 MVP v1 완료:
1. URL 1개 입력으로 분석 파이프라인이 실행된다.
2. 사이트맵/플로우 후보를 사용자 확인·수정·확정할 수 있다.
3. 확정 플로우 자동 실행이 가능하다.
4. PASS / PASS(with warnings) / FAIL을 일관되게 판정한다.
5. HTML 리포트 + CSV + 실패 스크린샷이 생성된다.

---

## 9) 다음 구현 우선순위 (Execution Plan)
1. 크롤러 제약 로직(same-origin, 50페이지, depth3, query 정규화)
2. 분석 결과 편집 UI(플로우 후보 수정/추가/삭제)
3. 실행 엔진(판정 규칙 + 증거 수집)
4. 리포트 파이프라인(HTML/CSV/스크린샷/오류요약)
5. 로그인 선택 모드(수동 credential + 메모리 주입)
